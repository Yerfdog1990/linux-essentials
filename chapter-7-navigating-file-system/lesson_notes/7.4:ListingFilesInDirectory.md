# 7.4 Listing Files in a Directory

In previous sections, visual diagrams were used to illustrate the filesystem structure. In real-world Linux environments, such maps are not provided. Instead, users rely on command-line tools to explore directories.

One of the most important commands for navigating the filesystem is:

```bash
ls [OPTION]... [FILE]...
```

The `ls` command (short for **list**) displays the contents of a directory and can also provide detailed information about files.

---

## 7.4 Basic Usage of `ls`

### Listing the Current Directory

When used with no options or arguments, `ls` lists the contents of the **current directory**.

Example:

```bash
sysadmin@localhost:~$ ls
Desktop  Documents  Downloads  Music  Pictures  Public  Templates  Videos
```

This shows the directories inside the sysadmin user's home directory.

---

### Listing Another Directory

You can also list the contents of any directory by providing its path as an argument.

Example:

```bash
sysadmin@localhost:~$ ls /var
backups  cache  lib  local  lock  log  mail  opt  run  spool  tmp
```

Here:

* `/var` is the argument (path)
* `ls` displays the contents of `/var` without changing directories

This makes `ls` extremely powerful for exploring the filesystem without moving around.

---

## Colored Output and Aliases

On many Linux distributions (including the course virtual machines), `ls` displays output in different colors depending on file type:

* **Blue** → Directories
* **Green** → Executable files
* **Cyan** → Symbolic links

However, colored output is not the default behavior of `ls`. It occurs because of an **alias**.

To check this, use:

```bash
sysadmin@localhost:~$ type ls
ls is aliased to `ls --color=auto'
```

This means:

* When you type `ls`
* The system actually runs `ls --color=auto`

---

### Bypassing the Alias

To avoid using the alias, place a backslash `\` before the command:

```bash
sysadmin@localhost:~$ ls
Desktop  Documents  Downloads  Music  Pictures  Public  Templates  Videos

sysadmin@localhost:~$ \ls
Desktop  Documents  Downloads  Music  Pictures  Public  Templates  Videos
```

The output appears similar in text form, but without color formatting.

---

# 7.4.1 Listing Hidden Files

By default, `ls` does **not** display hidden files.

### What Is a Hidden File?

A hidden file is any file or directory whose name begins with a dot (`.`).

Examples:

* `.bashrc`
* `.profile`
* `.cache`

---

### Displaying Hidden Files

To show all files, including hidden ones, use the `-a` option:

```bash
sysadmin@localhost:~$ ls -a
.              .bashrc   .selected_editor  Downloads  Public
..             .cache    Desktop           Music      Templates
.bash_logout   .profile  Documents         Pictures   Videos
```

---

### Understanding Special Entries

When using `ls -a`, you will see:

* `.` → Current directory
* `..` → Parent directory

---

### Why Are Files Hidden?

Most hidden files are **configuration files** used to customize:

* The Linux system
* The shell
* Applications

Example:

* `.bashrc` customizes shell behavior

    * Defines aliases
    * Sets environment variables
    * Configures shell appearance

These files are hidden because:

* Users do not interact with them regularly
* Hiding them reduces clutter
* It makes it easier to locate everyday files

---

# 7.4.2 Long Display Listing (`-l` Option)

Files have associated information called **metadata**.

Metadata includes:

* File type
* Permissions
* Owner
* Group
* Size
* Timestamps

To view detailed information, use:

```bash
ls -l
```

Example using `/var/log`:

```bash
sysadmin@localhost:~$ ls -l /var/log/
total 900
-rw-r--r-- 1 root   root  15322 Dec 10 21:33 alternatives.log
drwxr-xr-x 1 root   root   4096 Jul 19 06:52 apt
-rw-r----- 1 syslog adm     371 Dec 15 16:38 auth.log
-rw-r--r-- 1 root   root  35330 May 26  2018 bootstrap.log
-rw-rw---- 1 root   utmp      0 May 26  2018 btmp
-rw-r----- 1 syslog adm     197 Dec 15 16:38 cron.log
-rw-r--r-- 1 root   adm   85083 Dec 10 21:33 dmesg
-rw-r--r-- 1 root   root 351960 Jul 19 06:52 dpkg.log
-rw-r--r-- 1 root   root  32064 Dec 10 21:33 faillog
drwxr-xr-x 2 root   root   4096 Jul 19 06:51 journal
-rw-rw-r-- 1 root   utmp 292584 Dec 15 16:38 lastlog
-rw-r----- 1 syslog adm   14185 Dec 15 16:38 syslog
-rw------- 1 root   root  64128 Dec 10 21:33 tallylog
-rw-rw-r-- 1 root   utmp    384 Dec 15 16:38 wtmp
```

Each line represents one file or directory.

---

## Understanding `ls -l` Output Fields

Let’s break down this example:

```bash
-rw-r--r-- 1 root root 15322 Dec 10 21:33 alternatives.log
```

### 1️⃣ File Type (First Character)

The first character indicates the file type.

Examples:

```
-  → Regular file
d  → Directory
l  → Symbolic link
s  → Socket
p  → Pipe
b  → Block device
c  → Character device
```

Examples from output:

```
-rw-r--r--  → Regular file (alternatives.log)
drwxr-xr-x  → Directory (apt)
```

---

### 2️⃣ Permissions (Next 9 Characters)

Example:

```
drwxr-xr-x
```

These nine characters represent access permissions for:

* Owner
* Group
* Others

Permissions will be covered in detail later in the course.

---

### 3️⃣ Hard Link Count

Example:

```
-rw-r----- 1 syslog adm 371 Dec 15 16:38 auth.log
```

The number `1` indicates the number of **hard links** pointing to this file.

For directories:

```
drwxr-xr-x 2 root root 4096 Jul 19 06:51 journal
```

The `2` represents the link count.

Hard links will be discussed later in the course.

---

### 4️⃣ User Owner

Example:

```
-rw-r----- 1 syslog adm 197 Dec 15 16:38 cron.log
```

`syslog` is the user owner.

The owner:

* Can change file permissions
* Controls file access

---

### 5️⃣ Group Owner

Example:

```
-rw-rw-r-- 1 root utmp 292584 Dec 15 16:38 lastlog
```

`utmp` is the group owner.

Any member of this group may have specific permissions on the file.

---

### 6️⃣ File Size

Example:

```
14185
```

This shows the file size in **bytes**.

Important:

* For directories, this number does NOT represent total size of contents.
* It represents space reserved to track filenames.

---

### 7️⃣ Timestamp

Example:

```
May 26 2018
Dec 15 16:38
```

Indicates the last time the file’s contents were modified.

For directories:

* It shows the last time files were added or removed.

---

### 8️⃣ File Name

Example:

```
bootstrap.log
```

This is the actual file or directory name.

---

## Symbolic Links in Long Listing

For symbolic links, the output shows:

* Link name
* Arrow (`->`)
* Target file

Example:

```bash
lrwxrwxrwx. 1 root root 22 Nov 6 2018 /etc/grub.conf -> ../boot/grub/grub.conf
```

Breakdown:

* `l` → symbolic link
* `/etc/grub.conf` → link name
* `->` → points to
* `../boot/grub/grub.conf` → actual file location

Symbolic links will be covered in more detail later.

---

# 7.4.3 Human-Readable Sizes

When using the `-l` option with the `ls` command, file sizes are displayed in **bytes**.

Example:

```bash
sysadmin@localhost:~$ ls -l /var/log/lastlog
-rw-rw-r-- 1 root utmp 292584 Dec 15 16:38 /var/log/lastlog
```

The size shown is:

```
292584
```

This value represents **292,584 bytes**.

### Why Bytes Can Be Hard to Understand

For small text files, bytes are easy to understand (1 byte ≈ 1 character). However, for larger files, raw byte values can be difficult to interpret.

For example:

* Is 292,584 bytes large?
* Is it small?

Without converting it mentally, it’s hard to tell.

Think of it like measuring the distance between two cities in **inches** instead of miles — technically accurate, but not practical.

---

## Using the `-h` Option (Human-Readable)

To make file sizes easier to understand, use the `-h` option:

```bash
sysadmin@localhost:~$ ls -lh /var/log/lastlog
-rw-rw-r-- 1 root utmp 286K Dec 15 16:38 /var/log/lastlog
```

Now the size is displayed as:

```
286K
```

This means **286 kilobytes**, which is much easier to comprehend.

### Important

The `-h` option **must be used with `-l`**.

Correct:

```bash
ls -lh
```

Incorrect:

```bash
ls -h
```

---

# 7.4.4 Listing Directories

By default, `ls` lists the **contents of a directory**, not the directory itself.

To list information about the directory itself (instead of what is inside it), use the `-d` option.

---

## Using `-d` Alone

```bash
sysadmin@localhost:~$ ls -d
.
```

The `.` represents the current directory.

By itself, `-d` is not very useful.

---

## Using `-d` with `-l`

To make it meaningful, combine it with `-l`.

### Listing Contents (Normal `-l`)

```bash
sysadmin@localhost:~$ ls -l
total 32
drwxr-xr-x 2 sysadmin sysadmin 4096 Dec 10 21:33 Desktop
drwxr-xr-x 4 sysadmin sysadmin 4096 Dec 10 21:33 Documents
drwxr-xr-x 2 sysadmin sysadmin 4096 Dec 10 21:33 Downloads
drwxr-xr-x 2 sysadmin sysadmin 4096 Dec 10 21:33 Music
drwxr-xr-x 2 sysadmin sysadmin 4096 Dec 10 21:33 Pictures
drwxr-xr-x 2 sysadmin sysadmin 4096 Dec 10 21:33 Public
drwxr-xr-x 2 sysadmin sysadmin 4096 Dec 10 21:33 Templates
drwxr-xr-x 2 sysadmin sysadmin 4096 Dec 10 21:33 Videos
```

This shows the contents inside `/home/sysadmin`.

---

### Listing the Directory Itself (`-ld`)

```bash
sysadmin@localhost:~$ ls -ld
drwxr-xr-x 1 sysadmin sysadmin 224 Nov  7 17:07 .
```

Notice:

* The final field is `.`
* This indicates the current directory itself is being listed
* The contents are NOT displayed

This is useful when you want to:

* Check permissions of a directory
* View metadata about the directory itself

---

# 7.4.5 Recursive Listing (`-R`)

Sometimes, you want to display:

* All files in a directory
* AND all files in its subdirectories

This is called a **recursive listing**.

Use the `-R` option:

```bash
sysadmin@localhost:~$ ls -R /etc/ppp
/etc/ppp:
ip-down.d  ip-up.d

/etc/ppp/ip-down.d:
bind9

/etc/ppp/ip-up.d:
bind9
```

### What Happened Here?

1. First, `/etc/ppp` contents were listed
2. Then `/etc/ppp/ip-down.d`
3. Then `/etc/ppp/ip-up.d`

It automatically descended into subdirectories.

---

### Warning

Be careful when using recursive listing.

For example:

```bash
ls -R /
```

This would:

* List every file in the entire filesystem
* Include files on USB devices, DVDs, etc.
* Produce extremely large output

Best practice:

* Use `-R` only on small directory structures

---

# 7.4.6 Sorting a Listing

By default, `ls` sorts files alphabetically by name.

However, you can sort by other criteria.

---

## Sorting by Size (`-S`)

The `-S` option (capital S) sorts files from **largest to smallest**.

Example (default alphabetical):

```bash
sysadmin@localhost:~$ ls /etc/ssh
moduli              ssh_host_ecdsa_key.pub    ssh_host_rsa_key      sshd_config
ssh_config          ssh_host_ed25519_key      ssh_host_rsa_key.pub
ssh_host_ecdsa_key  ssh_host_ed25519_key.pub  ssh_import_id
```

Now sorted by size:

```bash
sysadmin@localhost:~$ ls -S /etc/ssh
moduli            ssh_host_ed25519_key  ssh_host_ecdsa_key.pub
sshd_config       ssh_host_rsa_key.pub  ssh_host_ed25519_key.pub
ssh_host_rsa_key  ssh_import_id
ssh_config        ssh_host_ecdsa_key
```

---

### Most Useful with `-l`

To actually see file sizes:

```bash
sysadmin@localhost:~$ ls -lS /etc/ssh
total 580
-rw-r--r-- 1 root root 553122 Feb 10  2018 moduli
-rw-r--r-- 1 root root   3264 Feb 10  2018 sshd_config
-rw------- 1 root root   1679 Jul 19 06:52 ssh_host_rsa_key
-rw-r--r-- 1 root root   1580 Feb 10  2018 ssh_config
...
```

---

### Adding Human-Readable Sizes

```bash
sysadmin@localhost:~$ ls -lSh /etc/ssh
total 580K
-rw-r--r-- 1 root root 541K Feb 10  2018 moduli
-rw-r--r-- 1 root root 3.2K Feb 10  2018 sshd_config
-rw------- 1 root root 1.7K Jul 19 06:52 ssh_host_rsa_key
...
```

Now sizes are easier to interpret.

---

## Sorting by Modification Time (`-t`)

The `-t` option sorts by **most recently modified first**.

```bash
sysadmin@localhost:~$ ls -tl /etc/ssh
total 580
-rw------- 1 root root    227 Jul 19 06:52 ssh_host_ecdsa_key
-rw-r--r-- 1 root root    179 Jul 19 06:52 ssh_host_ecdsa_key.pub
-rw------- 1 root root    411 Jul 19 06:52 ssh_host_ed25519_key
...
```

Most recently modified files appear first.

### Important

For directories:

* The modified time represents the last time a file was added or removed.

---

## Full Timestamp (`--full-time`)

For more precise timestamps:

```bash
sysadmin@localhost:~$ ls -t --full-time /etc/ssh
```

Example output:

```
-rw------- 1 root root 227 2018-07-19 06:52:16.000000000 +0000 ssh_host_ecdsa_key
```

This shows:

* Date
* Hours
* Minutes
* Seconds
* Timezone

Note:

* `--full-time` automatically assumes `-l`

---

## Reverse Sorting (`-r`)

The `-r` option reverses the sort order.

---

### Smallest to Largest (Size Reverse)

```bash
sysadmin@localhost:~$ ls -lrS /etc/ssh
total 580
-rw-r--r-- 1 root root     99 Jul 19 06:52 ssh_host_ed25519_key.pub
-rw-r--r-- 1 root root    179 Jul 19 06:52 ssh_host_ecdsa_key.pub
...
-rw-r--r-- 1 root root 553122 Feb 10  2018 moduli
```

Now files are sorted from smallest to largest.

---

### Oldest to Newest (Time Reverse)

```bash
sysadmin@localhost:~$ ls -lrt /etc/ssh
total 580
-rw-r--r-- 1 root root   3264 Feb 10  2018 sshd_config
-rw-r--r-- 1 root root   1580 Feb 10  2018 ssh_config
-rw-r--r-- 1 root root 553122 Feb 10  2018 moduli
...
```

Files are now sorted from oldest to newest.

---

# Summary

The `ls` command is one of the most essential Linux navigation tools.

## Basic Usage

* `ls` → List current directory
* `ls /path` → List another directory

## Useful Options

* `-a` → Show hidden files
* `-l` → Long detailed listing

## Hidden Files

* Start with `.`
* Typically configuration files
* Shown with `ls -a`

## Long Listing (`-l`) Displays:

1. File type
2. Permissions
3. Hard link count
4. User owner
5. Group owner
6. File size
7. Timestamp
8. File name

Mastering the `ls` command allows you to:

* Explore the filesystem
* Identify file types
* Understand ownership and permissions
* Diagnose issues
* Navigate confidently without graphical tools

It is one of the most powerful and frequently used commands in Linux.

## Human-Readable Sizes

* `-l` → Shows sizes in bytes
* `-lh` → Shows sizes in KB, MB, GB
* Must combine `-h` with `-l`

---

## Listing Directories

* `-d` → Lists directory itself
* `-ld` → Lists detailed metadata of directory
* `.` → Represents current directory

---

## Recursive Listing

* `-R` → Lists directory and all subdirectories
* Use cautiously on large directory structures

---

## Sorting Options

| Option        | Purpose                                  |
| ------------- | ---------------------------------------- |
| `-S`          | Sort by size (largest first)             |
| `-t`          | Sort by modification time (newest first) |
| `-r`          | Reverse sort order                       |
| `--full-time` | Show full timestamp                      |
| `-h`          | Human-readable sizes (with `-l`)         |

---

Mastering these `ls` options allows you to:

* Quickly identify large files
* Find recently modified files
* Inspect directory metadata
* Explore complex directory structures
* Analyze file organization efficiently

The `ls` command is not just for listing files — it is a powerful diagnostic and navigation tool in Linux.

---