# 8.3 Copying Files

The `cp` command is used to copy files in Linux. It requires two arguments:

```
cp source destination
```

* **source** → the file to be copied
* **destination** → where the copy will be placed

When the `cp` command is successful, it produces **no output**.

> No news is good news.

---

## Basic Copy Example

The following command copies the `/etc/hosts` file to your home directory:

```id="cp01a"
sysadmin@localhost:~$ cp /etc/hosts ~
```

Now list the contents of the home directory:

```id="cp01b"
sysadmin@localhost:~$ ls
Desktop    Downloads  Pictures  Templates  hosts
Documents  Music      Public    Videos
```

The `hosts` file now exists in the home directory.

### Reminder

The `~` character represents your **home directory**.

---

# 8.3.1 Verbose Mode

The `-v` option stands for **verbose**.

When used, the `cp` command displays output showing what was copied.

```id="cp02a"
sysadmin@localhost:~$ cp -v /etc/hosts ~
`/etc/hosts' -> `/home/sysadmin/hosts'
```

This confirms:

* The source file
* The destination location

---

## Renaming While Copying

When the destination is a directory, the copied file keeps its original name.

To rename the file during copying, include the new filename in the destination path:

```id="cp02b"
sysadmin@localhost:~$ cp /etc/hosts ~/hosts.copy
```

Now list the directory:

```id="cp02c"
sysadmin@localhost:~$ ls
Desktop    Downloads  Pictures  Templates  hosts
Documents  Music      Public    Videos     hosts.copy
```

The file has been copied and renamed to `hosts.copy`.

---

# 8.3.2 Avoid Overwriting Data

The `cp` command can be destructive if the destination file already exists.

If the destination file exists:

> The existing file’s contents are overwritten with the source file’s contents.

---

## Demonstrating the Overwrite Problem

First, create a new file in the home directory:

```id="cp03a"
sysadmin@localhost:~$ cp /etc/hostname example.txt
```

Check the file details:

```id="cp03b"
sysadmin@localhost:~$ ls -l example.txt
-rw-r--r-- 1 sysadmin sysadmin 10 Dec 15 22:55 example.txt
```

View its contents:

```id="cp03c"
sysadmin@localhost:~$ cat example.txt
localhost
```

---

## Overwriting the File

Now copy another file into `example.txt`:

```id="cp03d"
sysadmin@localhost:~$ cp /etc/timezone example.txt
```

Check the file details again:

```id="cp03e"
sysadmin@localhost:~$ ls -l example.txt
-rw-r--r-- 1 sysadmin sysadmin 8 Dec 15 22:58 example.txt
```

Notice:

* The file size changed (10 → 8 bytes)

Check the contents:

```id="cp03f"
sysadmin@localhost:~$ cat example.txt
Etc/UTC
```

The original contents (`localhost`) were destroyed.

---

## Using the `-i` Interactive Option

To prevent accidental overwrites, use the `-i` option.

It stands for **interactive** and prompts before overwriting.

```id="cp04a"
sysadmin@localhost:~$ cp -i /etc/hosts example.txt
cp: overwrite `/home/sysadmin/example.txt'? n
```

* If you type `y` → file is overwritten
* If you type `n` → file is not overwritten

In this case, `n` was entered, so no changes were made.

---

## The Problem With Many Prompts

If many files may be overwritten, the `-i` option can become tedious:

```id="cp04b"
sysadmin@localhost:~$ cp -i /etc/skel/.* ~
cp: -r not specified; omitting directory '/etc/skel/.'
cp: -r not specified; omitting directory '/etc/skel/..'
cp: overwrite `/home/sysadmin/.bash_logout'? n
cp: overwrite `/home/sysadmin/.bashrc'? n
cp: overwrite `/home/sysadmin/.profile'? n
cp: overwrite `/home/sysadmin/.selected_editor'? n
```

The system prompted four times.

If this involved 100 files, it would be very time-consuming.

---

## Using the `-n` Option (No Clobber)

The `-n` option stands for **no clobber** (no overwrite).

It automatically answers “no” to overwrite prompts.

```id="cp04c"
sysadmin@localhost:~$ cp -n /etc/skel/.* ~
cp: -r not specified; omitting directory '/etc/skel/.'
cp: -r not specified; omitting directory '/etc/skel/..'
```

This prevents overwriting existing files without prompting.

---

# 8.3.3 Copying Directories

By default, the `cp` command does **not** copy directories.

Attempting to copy directories without recursion results in an error:

```id="cp05a"
sysadmin@localhost:~$ cp -n /etc/skel/.* ~
cp: -r not specified; omitting directory '/etc/skel/.'
cp: -r not specified; omitting directory '/etc/skel/..'
```

The error message:

```
-r not specified; omitting directory
```

indicates that directories are being skipped.

---

## Using the `-r` Recursive Option

To copy directories and their contents, use the `-r` option:

```
cp -r source_directory destination_directory
```

The `-r` option tells `cp` to:

* Copy directories
* Copy all files inside them
* Copy subdirectories recursively

---

### ⚠ Be Careful With `-r`

Using `-r` copies the entire directory structure.

This can result in copying:

* Many files
* Many subdirectories
* Large amounts of data

Always verify what you are copying before using `-r`.

---

## `-r` vs `-R`

Both options serve the same purpose for `cp`:

* `-r` → recursive
* `-R` → recursive

However:

* `-R` is more consistent across commands
* `-r` can have different meanings with other commands

### Example Difference

* `cp -r` → copy recursively
* `ls -r` → reverse sort output

So be careful: options can have different meanings depending on the command.

---

# Summary of Copying Files

### Basic Syntax

```
cp source destination
```

### Important Options

| Option       | Meaning                                   |
| ------------ | ----------------------------------------- |
| `-v`         | Verbose (show what is copied)             |
| `-i`         | Interactive (prompt before overwrite)     |
| `-n`         | No clobber (never overwrite)              |
| `-r` or `-R` | Recursive (copy directories and contents) |

---

## Key Concepts

* `cp` does not produce output when successful.
* The `~` symbol represents the home directory.
* Files are overwritten silently unless protection options are used.
* Always use `-i` or `-n` when protecting important data.
* Use `-r` carefully when copying directories.

Mastering the `cp` command is essential for safely managing files and directories in Linux.

---