# 6.3 Finding Commands and Documentation

In Linux, there may be multiple commands, documentation files, and related resources associated with a single name. Because Linux evolved from UNIX — which had multiple variants — some commands were developed in parallel. As a result, modern Linux systems sometimes contain multiple versions of similar tools or documentation.

This section explains how to:

* Identify which man page a command belongs to
* Determine where commands and documentation are stored
* Locate files and directories anywhere on the system

---

# 6.3 Finding Man Pages with `whatis` (or `man -f`)

The `whatis` command (or `man -f`) is used to determine:

* Which section a man page belongs to
* A short description of the command

### Example (Console Log)

```bash
sysadmin@localhost:~$ whatis ls
ls (1)               - list directory contents
ls (lp)              - list directory contents
```

### Understanding the Output

This output shows two entries for `ls`:

* `ls (1)`
* `ls (lp)`

Both describe commands that list directory contents.

---

## Why Are There Two?

UNIX had two major variants. Some commands were developed separately for each variant. Modern Linux distributions often include tools derived from both UNIX traditions.

This means:

* Some commands exist in more than one section
* Multiple manual pages may describe similar functionality

---

## Important Question

If there are two `ls` man pages, which command runs when you type:

```bash
ls
```

The answer depends on:

* The command’s location in the system
* The shell’s search path (`$PATH`)

To determine this, we use another tool.

---

# 6.3.1 Where Are These Commands Located?

To find where a command and its documentation are stored, use:

```bash
whereis command
```

The `whereis` command searches typical system locations for:

* Executable files
* Source files
* Man pages

---

### Example (Console Log)

```bash
sysadmin@localhost:~$ whereis ls
ls: /bin/ls /usr/share/man/man1p/ls.1.gz /usr/share/man/man1/ls.1.gz
```

---

## Understanding the Output

This shows:

* `/bin/ls` → The actual executable command
* `/usr/share/man/man1p/ls.1.gz` → One man page
* `/usr/share/man/man1/ls.1.gz` → Another man page

Notice:

* There is only **one executable command**
* There are **two man pages**

---

## Why Are Man Pages Ending in `.gz`?

Man pages are typically compressed using **gzip**, which creates files ending in:

```
.gz
```

This reduces storage usage.

---

## Important Observation

Even though there are two man pages, there is only one executable command:

```
/bin/ls
```

This means:

* The `ls` command supports features described in both man pages.
* When learning about `ls`, it may be helpful to review both manual entries.

However, most commands typically have only one man page.

---

# 6.3.2 Finding Any File or Directory

The `whereis` command is limited to searching for:

* Commands
* Source files
* Man pages

If you need to find **any file or directory**, use:

```bash
locate
```

---

## How `locate` Works

The `locate` command searches a pre-built database of file names.

Important:

* This database is usually updated nightly.
* Files created today may not appear in results.
* Only root can manually update the database.

To manually update the database (root only):

```bash
updatedb
```

---

### Example (Console Log)

```bash
sysadmin@localhost:~$ locate gshadow
/etc/gshadow
/etc/gshadow-
/usr/include/gshadow.h
/usr/share/man/cs/man5/gshadow.5.gz
/usr/share/man/da/man5/gshadow.5.gz
/usr/share/man/de/man5/gshadow.5.gz
/usr/share/man/fr/man5/gshadow.5.gz
/usr/share/man/it/man5/gshadow.5.gz
/usr/share/man/man5/gshadow.5.gz
/usr/share/man/ru/man5/gshadow.5.gz
/usr/share/man/sv/man5/gshadow.5.gz
/usr/share/man/zh_CN/man5/gshadow.5.gz
```

This shows:

* System configuration files
* Header files
* Man pages in multiple languages

---

# Permissions and Security

When running `locate` as a regular user:

* Results may be limited
* Files you do not have permission to access will not appear

This prevents users from exploring restricted areas.

The root user can search the entire database.

---

# Managing Large Output

Searching for common terms can produce many results.

Example:

```bash
sysadmin@localhost:~$ locate -c passwd
98
```

The `-c` option:

* Counts matching entries
* Does not display them

Here, 98 files contain the string `passwd`.

---

## Limiting Results with `-b`

The `-b` option restricts matches to the **basename** only.

The basename is the filename without the directory path.

Example:

```bash
sysadmin@localhost:~$ locate -c -b passwd
83
```

This limits matches to filenames containing `passwd`.

---

## Exact Filename Matching

To match only filenames that exactly equal `passwd`, escape the search term:

```bash
sysadmin@localhost:~$ locate -b "\passwd"
/etc/passwd
/etc/pam.d/passwd
/usr/bin/passwd
/usr/share/doc/passwd
/usr/share/lintian/overrides/passwd
```

The `\` character ensures:

* The search matches filenames exactly named `passwd`
* Not files that merely contain the word `passwd`

---

# Summary

## `whatis` or `man -f`

* Finds which section a man page belongs to
* Displays short descriptions
* Useful when multiple manual entries exist

---

## `whereis`

* Finds command binaries
* Finds source files
* Finds man pages
* Searches specific system directories

Example:

```bash
whereis ls
```

---

## `locate`

* Finds any file or directory
* Searches a database
* Fast but may not include very recent files
* Limited by user permissions

Useful options:

| Option  | Purpose              |
| ------- | -------------------- |
| `-c`    | Count matches        |
| `-b`    | Match basename only  |
| `\term` | Match exact filename |

---

# Key Takeaways

* Linux may contain multiple documentation entries for similar commands.
* `whatis` helps identify man page sections.
* `whereis` shows command and documentation locations.
* `locate` finds files across the filesystem.
* File permissions affect search results.
* The locate database must be updated to include new files.

Understanding these tools allows you to quickly find:

* Commands
* Documentation
* Configuration files
* Any file on the system

This is an essential Linux skill for both learning and system administration.

---